{
  "Speeding up for loops in pySpark": [
    "https://stackoverflow.com/questions/75905258/speeding-up-for-loops-in-pyspark",
    "<p>I need a hand at solving this problem. I have a for loop that iterates on a list and builds a linear model for each item on that list. I have built a python for loop, but my list of items can get very lengthy and I know I am probably not taking advantage of all Spark has to offer. So here is my code:</p>\n<pre><code>for i in items:\n    \n        df_item = df.where(col(&quot;items&quot;)==i)\n\n        vectorAssembler = VectorAssembler(inputCols = ['x'], outputCol = 'features')\n        vector_df = vectorAssembler.transform(dt)\n        premodel_df = vector_df.select(['features', 'Y'])\n        lr = LinearRegression(featuresCol = 'features', labelCol='y_pred', maxIter=10, regParam=0, elasticNetParam=0)\n        lr_model = lr.fit(premodel_df)\n        r_squared = lr_model.summary.r2\n        item = i\n        lr_info = (Row(item=i\n                     ,r2=r_squared)\n                     )\n\n        lm_results = lm_results.union(lm_info)\n</code></pre>\n<p>I therefore need some sort of examples that will help in speeding up the process</p>\n"
  ],
  "how to remove consecutive digits from a df": [
    "https://stackoverflow.com/questions/75928974/how-to-remove-consecutive-digits-from-a-df",
    "<p>I want to remove rows which contains consecutive digits in a df and at the end a 0 such as 12340 or 45670. I tried this code but nothing changed</p>\n<pre><code>rows_to_remove = []\nfor i, row in df.iterrows():\n    digits = [int(d) for d in str(row['prix'])]\n    if all([digits[j+1]-digits[j] == 1 for j in range(len(digits)-1)]) and digits[-1] == 0:\n        rows_to_remove.append(i)\n\ndf = df.drop(rows_to_remove)\n</code></pre>\n"
  ],
  "How can list comprehension be combined with traditional list definitions": [
    "https://stackoverflow.com/questions/75949169/how-can-list-comprehension-be-combined-with-traditional-list-definitions",
    "<p>I am trying to create a list in which list comprehension is used to create the first 16 entries but then manually add the rest of the entries without creating a nested list.</p>\n<p>My code</p>\n<pre class=\"lang-py prettyprint-override\"><code>lst = [[x for x in range(16)], &quot;a&quot;, &quot;q&quot;, &quot;l&quot;, &quot;b&quot;, &quot;s&quot;]\n</code></pre>\n<p>I would like the output to be</p>\n<pre><code>[1, 2, 3, 4, 5, ... 16, a, q, l, b, s]\n</code></pre>\n<p>However the output I am getting is</p>\n<pre><code>[[1, 2, 3... 16], a, q, l, b, s]\n</code></pre>\n"
  ],
  "return render_template() gives out blank page": [
    "https://stackoverflow.com/questions/75931401/return-render-template-gives-out-blank-page",
    "<p>I am trying to create a website with the following functionality:\nA person enters their email adress and presses a button.\nThe site sends a standardized email to the adress that has been put in.\nIf i put in the python script with just the function of displaying a text window for entering an emailadress, a button and some text everything works fine.\nAs soon as i add the funcions of sending an email i get a blank page.</p>\n<p>I am using the following python script:</p>\n<pre><code>from flask import Flask, render_template, request\nimport smtplib\n\n# SMTP-Server-Setup\nsmtp_server = 'smtp.example'\nsmtp_port = 587\nsmtp_username = 'mailadress' #sendnig mail adress\nsmtp_password = 'password' #password\n\napp = Flask(__name__)\n\n@app.route('/')\ndef index():\n    return render_template('index.html')\n\n@app.route('/', methods=['POST'])    \ndef signup():\n    # E-Mail-contents\n    from_email = 'your_email@gmail.com'\n    to_email = request.form['email']\n    subject = 'success'\n    body = 'congrats!'\n\n    # connecting to smtp\n    server = smtplib.SMTP(smtp_server, smtp_port)\n    server.starttls()\n    server.login(smtp_username, smtp_password)\n\n    # creating and sending email\n    message = f'Subject: {subject}\\n\\n{body}'\n    server.sendmail(from_email, to_email, message)\n\n    # closing down smtp connection\n    server.quit()\n\n    return 'thx for ur participation'\n\nif __name__ == '__main__':\n    app.run(debug=True)\n</code></pre>\n<p>index.html is as following:</p>\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n  &lt;head&gt;\n    &lt;title&gt;Enter your email adress&lt;/title&gt;\n  &lt;/head&gt;\n  &lt;body&gt;\n    &lt;h1&gt;Enter your email adress&lt;/h1&gt;\n    &lt;p&gt;Please do XYZ so we can do abc.&lt;/p&gt;\n    &lt;form action=&quot;/submit_email&quot; method=&quot;post&quot;&gt;\n      &lt;label for=&quot;email&quot;&gt;E-Mail-Adresse:&lt;/label&gt;\n      &lt;input type=&quot;email&quot; id=&quot;email&quot; name=&quot;email&quot; required&gt;\n      &lt;br&gt;&lt;br&gt;\n      &lt;input type=&quot;submit&quot; value=&quot;Submit&quot;&gt;\n    &lt;/form&gt;\n  &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n"
  ],
  "aiomultiprocessing pool freezes and OSError: [Errno 24] Too many open files": [
    "https://stackoverflow.com/questions/75950029/aiomultiprocessing-pool-freezes-and-oserror-errno-24-too-many-open-files",
    "<p>I've looked at <a href=\"https://stackoverflow.com/questions/67365870/too-many-open-files-error-with-python-multiprocessing\">this question</a> and have talked with chatGPT/bing (lol) and still can't figure this one out.</p>\n<p>I am trying to execute ~7mn requests to an API on a machine with 32 CPUs, loading the data to postgres. I have my code essentially set up like this:</p>\n<pre><code>from aiomultiprocess import Pool\nCPUS = 30 #(32 CPUS available)\nbatch_size = 5000\n\nfor i in range(0, len(args_list), batch_size):\n        log.info(f&quot;&lt;log message&gt;&quot;)\n        async with Pool(\n            processes=CPUS,\n            maxtasksperchild=100,\n            childconcurrency=3,\n            queuecount=int(CPUS / 3),\n        ) as pool:\n            await pool.starmap(fetch_api_results, args_list[i : i + batch_size])\n</code></pre>\n<p>It will run for an hour or two (expecting it to take a day or two) and will then freeze. No errors thrown. When I keyboard-interrupt it, I will see the <code>OSError: [Errno 24] Too many open files</code> error.</p>\n<p>I've put the traceback below.</p>\n<p>From my understanding, it seems like the issue of too many files handlers being open has to do with the spawning of new worker processes in the pool. What confuses me is that the docs say that the maxtasksperchild limit, when reached, should result in an old worker process getting killed and a new one being spawned. This is too prevent memory leaks, and I would assume, to keep this problem from happening.</p>\n<p>However, changing the maxtasksperchild parameter has yielded no change.</p>\n<p>Furthermore, I implemented the batch processing to effectively kill the pool and start a new one after ever 5000 tasks to also prevent an accumulation of file_handlers. The <code>with pool:</code> implementation should effectively kill everything to do with that pool once the with block closes. But this has also failed. There was no change after implementing the batching method.</p>\n<p>It has all left me pretty confused. It's clear it has to do with the piping of newly spawned processes, but I'm not sure what to do. Any feedback would be welcome.</p>\n<p>A short-term fix that would just extend the amount of time I have before the script fails could be to open the max number of possible files to open (per the linked answer). But I would fear this will be exceeded too, since this is going to be a pretty long running job.</p>\n<p>Any help is very appreciated!\nHere is the full traceback:</p>\n<pre><code>File &quot;&lt;path-to-file&gt;.py&quot;, line 127, in import_data\n    await pool.starmap(fetch_api_results, args_list[i : i + batch_size])\n  File &quot;/&lt;path-to-env&gt;/lib/python3.11/site-packages/aiomultiprocess/pool.py&quot;, line 136, in results\n    return await self.pool.results(self.task_ids)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File &quot;/&lt;path-to-env&gt;/lib/python3.11/site-packages/aiomultiprocess/pool.py&quot;, line 312, in results\n    await asyncio.sleep(0.005)\n  File &quot;/&lt;path-to-env&gt;/lib/python3.11/asyncio/tasks.py&quot;, line 639, in sleep\n    return await future\n\nFile &quot;/&lt;path-to-env&gt;/3.11.1/lib/python3.11/asyncio/runners.py&quot;, line 118, in run\n    return self._loop.run_until_complete(task)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File &quot;/&lt;path-to-env&gt;/lib/python3.11/asyncio/base_events.py&quot;, line 653, in run_until_complete\n    return future.result()\n           ^^^^^^^^^^^^^^^\n  File &quot;/&lt;path-to-file&gt;/main.py&quot;, line 39, in add_all_data\n    await import_data(args)\n  File &quot;/&lt;path-to-file&gt;/orchestrator.py&quot;, line 120, in import_data\n    async with Pool(\n  File &quot;/&lt;path-to-env&gt;/lib/python3.11/site-packages/aiomultiprocess/pool.py&quot;, line 196, in __aexit__\n    await self.join()\n  File &quot;/&lt;path-to-env&gt;/lib/python3.11/site-packages/aiomultiprocess/pool.py&quot;, line 379, in join\n    await self._loop\n  File &quot;/&lt;path-to-env&gt;/lib/python3.11/site-packages/aiomultiprocess/pool.py&quot;, line 229, in loop\n    self.processes[self.create_worker(qid)] = qid\n                   ^^^^^^^^^^^^^^^^^^^^^^^\n  File &quot;/&lt;path-to-env&gt;/lib/python3.11/site-packages/aiomultiprocess/pool.py&quot;, line 261, in create_worker\n    process.start()\n  File &quot;/&lt;path-to-env&gt;/lib/python3.11/site-packages/aiomultiprocess/core.py&quot;, line 153, in start\n    return self.aio_process.start()\n           ^^^^^^^^^^^^^^^^^^^^^^^^\n  File &quot;/&lt;path-to-env&gt;/lib/python3.11/multiprocessing/process.py&quot;, line 121, in start\n    self._popen = self._Popen(self)\n                  ^^^^^^^^^^^^^^^^^\n  File &quot;/&lt;path-to-env&gt;/lib/python3.11/multiprocessing/context.py&quot;, line 288, in _Popen\n    return Popen(process_obj)\n           ^^^^^^^^^^^^^^^^^^\n  File &quot;/&lt;path-to-env&gt;/lib/python3.11/multiprocessing/popen_spawn_posix.py&quot;, line 32, in __init__\n    super().__init__(process_obj)\n  File &quot;/&lt;path-to-env&gt;/lib/python3.11/multiprocessing/popen_fork.py&quot;, line 19, in __init__\n    self._launch(process_obj)\n  File &quot;/home/&lt;path-to-env&gt;/lib/python3.11/multiprocessing/popen_spawn_posix.py&quot;, line 58, in _launch\n    self.pid = util.spawnv_passfds(spawn.get_executable(),\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File &quot;/&lt;path-to-env&gt;/lib/python3.11/multiprocessing/util.py&quot;, line 451, in spawnv_passfds\n    errpipe_read, errpipe_write = os.pipe()\n                                  ^^^^^^^^^\nOSError: [Errno 24] Too many open files\n</code></pre>\n"
  ],
  "How to convert dict into array of objects in python": [
    "https://stackoverflow.com/questions/75949951/how-to-convert-dict-into-array-of-objects-in-python",
    "<p>I have a dict list <code>dict(streams_list)</code> which gives values example- <code>{'Generic': ['_96_fkGECEeyqHrLeykGtFQ'], 'SF1B': ['_9lG7AJ8PEey0L88pC_veNw']}</code></p>\n<p>How can I convert this to array of objects ? example -</p>\n<p><code>[{'Generic': '_96_fkGECEeyqHrLeykGtFQ'}, {'SF1B': '_9lG7AJ8PEey0L88pC_veNw'},....]</code></p>\n"
  ],
  "How can I avoid memory error when using Polars&#39; scan_csv and fetch to process large CSV files?": [
    "https://stackoverflow.com/questions/75948299/how-can-i-avoid-memory-error-when-using-polars-scan-csv-and-fetch-to-process-la",
    "<p>I'm using Polars' <code>scan_csv()</code> and <code>fetch()</code> to process multiple CSV files in a directory, but I keep getting a memory error. The CSV files are quite large, and I only need to process a small portion of the data. How can I avoid this memory error and process the data more efficiently? Here is my code so far:</p>\n<pre><code>import os\nimport polars as pl\n\ndf = pl.scan_csv(os.path.join(&quot;data&quot;, &quot;*.csv&quot;))\ndf = df.sort(&quot;account_balance&quot;, descending=True)\ndf = df.unique(subset=[&quot;account_id&quot;], keep=&quot;first&quot;)\ndf.fetch(1000000, streaming=True) \n\ndf.write_csv(&quot;df.csv&quot;)\n</code></pre>\n<p>The expectation is to have the code running without any memory errors and quickly.</p>\n"
  ],
  "FastAPI with uvicorn and pycord = The future belongs to a different loop than the one specified as the loop argument": [
    "https://stackoverflow.com/questions/75848232/fastapi-with-uvicorn-and-pycord-the-future-belongs-to-a-different-loop-than-th",
    "<p>Trying to run <code>FastAPI</code> on <code>Uvicorn</code> with <code>py-cord</code>\nI have some get requests in my code and two discord functions.\nOverall program works, discord bot is slower to respond but it gives me this warning/error:</p>\n<pre><code>ValueError: The future belongs to a different loop than the one specified as the loop argument\n</code></pre>\n<p>Trying to run <code>pycord</code> with <code>asyncio</code> and <code>FastAPI</code> lifespan events:</p>\n<pre><code>@asynccontextmanager\nasync def lifespan(app: FastAPI):\n    asyncio.create_task(client.start(DISCORD_TOKEN))\n    yield\n    client.close()\n\napp = FastAPI(lifespan=lifespan)\n</code></pre>\n<p>However, if I run <code>uvicorn</code> like this:</p>\n<pre><code>uvicorn.run(&quot;main:app&quot;, host=&quot;0.0.0.0&quot;, port=5000, reload=True)\n</code></pre>\n<p>This gives no errors. The bot responds instantly.</p>\n<p>When switching to production mode:</p>\n<pre><code>uvicorn.run(app, host=&quot;0.0.0.0&quot;, port=5000, log_level=&quot;info&quot;)\n</code></pre>\n<p>The following error occurs.\nWould I need to create a separate thread for the event loop?</p>\n<p>I tried all different solutions from forums and github, tried changing asyncio.\nSolo <code>fastapi</code> works great.</p>\n<p>I can't understand what to do next to run them together.</p>\n<p>Edit 06/04: I switched to discord.py instead of pycord. Errors is gone.\nHopefully it will help someone</p>\n"
  ],
  "card game is broken, dealer can draw twice randomly": [
    "https://stackoverflow.com/questions/75943012/card-game-is-broken-dealer-can-draw-twice-randomly",
    "<p>so, i made a simple game of blackjack and everything goes smoothly, until the dealer takes one turn and there score goes from 0 to 17, and the highest card is a 14. this happens randomly with seemingly no logic to it, it wont happen for 15 runs and then will happen twice in a row. (what it looks like is you draw once and then, its the dealers turn, there at 0, they draw, now there score is 17, and it seems to be a rare bug, though it might just be replit...)</p>\n<pre><code>#importing things...\nimport os,time\nimport random\n#defines the deck and players\ndeck = []\nplayer_value = 0\ndealer_value = 0\nfor _ in range(4):\n  for x in range(1, 14):\n    deck.append(x)\nrandom.shuffle(deck)\n#while loop for win/lose condition and player turn start\nprint (&quot;welcome! these are the rules: \\n if you go over 21 you lose,\\n if you hit it exactly you win! \\n same goes for the dealer. \\n&quot;)\nwhile((player_value)&lt;21 and (dealer_value)&lt;21):\n  print (&quot;dealer score&quot;,(dealer_value))\n  print (&quot;your score&quot;,(player_value))\n\n  player_input = input(&quot;draw or pass:&quot;)\n\n  if player_input == &quot;draw&quot;:\n    card_drawn = deck.pop()\n    print (&quot;the value of the card drawn was:&quot;,(card_drawn))\n    player_value = player_value + card_drawn\n    time.sleep(0.7)\n    os.system(&quot;clear&quot;)\n  if player_input == &quot;pass&quot;:\n    print (&quot;passing&quot;)\n    time.sleep(1)\n    os.system(&quot;clear&quot;)\n  if player_value &gt; 21:\n    break\n  #dealer ai starts\n  print (&quot;dealer ai's turn&quot;)\n  if dealer_value &lt; 13:\n    card_drawn = deck.pop()\n    print(&quot;dealer ai draws...&quot;)\n    print (&quot;the value of the card drawn was:&quot;,(card_drawn))\n    dealer_value = dealer_value + card_drawn\n    time.sleep(1)\n    os.system(&quot;clear&quot;)\n  if dealer_value == 19 or dealer_value &gt;19:\n   print(&quot;dealer passes&quot;)\n   time.sleep(2)\n   os.system(&quot;clear&quot;)\n  elif dealer_value &gt; 13 or dealer_value == 13:\n       if random.randint(0,1) == 1:\n        card_drawn = deck.pop()\n        print(&quot;dealer ai draws...&quot;)\n        print (&quot;the value of the card drawn was:&quot;,(card_drawn))\n        dealer_value = dealer_value + card_drawn\n       else:\n        print(&quot;dealer passes&quot;)\n        time.sleep(2)\n        os.system(&quot;clear&quot;)\n        time.sleep(2)\n#start victory/loss checks\nif player_value == 21 or player_value &lt; 21:\n  print (&quot;you win!&quot;)\nelif  player_value &gt; 21:\n  print (&quot;you lose&quot;)\n\nprint(&quot;restart to play again!&quot;)\n \n</code></pre>\n"
  ],
  "How can i remove all duplicated elements from list, but updating first entrys value in other column, if not the same": [
    "https://stackoverflow.com/questions/75950002/how-can-i-remove-all-duplicated-elements-from-list-but-updating-first-entrys-va",
    "<p>I have an imaginary dataframe of such nature:</p>\n<pre><code>df = pd.DataFrame({\n    'brand': ['Yum Yum', 'ByRice', 'LuxSoba', 'Indomie', 'Indomie'],\n    'style': ['cup', 'cup', 'cup', 'pack', 'pack'],\n    'flavour': [chili, chicken, chili, beef, cheese]\n})\ndf\n    brand style  flavour\n0  Yum Yum   cup     chili\n1  ByRice   cup     chicken\n2  LuxSoba   cup     chili\n3  Indomie  pack    beef\n4  Indomie  pack     cheese\n\n</code></pre>\n<p>My goal is to change dataframe in such manner, that all duplicate entries of brands are deleted, but if there are several flavours, they all are appended into one column, to the first entry. So dataframe should  look like this:</p>\n<pre><code>    brand style  flavour\n0  Yum Yum   cup     chili\n1  ByRice   cup     chicken\n2  LuxSoba   cup     chili\n3  Indomie  pack    beef, cheese\n</code></pre>\n<p>I'm not sure how to approach this problem.</p>\n"
  ],
  "Passing Jacobian to Julia through the diffeqpy python package": [
    "https://stackoverflow.com/questions/75949903/passing-jacobian-to-julia-through-the-diffeqpy-python-package",
    "<p>I have a Python package that defines an ODE <code>y'=f(y)</code> corresponding to the semi-discretisation in space of a heat-like equation.\nI want to test some integrators availabe in the <code>DifferentialEquations</code> module from Julia, without rewriting everything in Julia, which is a language I do not known very well. Therefore I turned to the <code>diffeqpy</code> package that enables the use of these directly in Python.</p>\n<p>The PDE I solve is discretised with a few dozens to hundreds cells, and I need to perform lots of simulation for parametric studies, in particular with IMEX methods.\nThe issue is I cannot find a way to give an hint about the sparsity pattern of the Jacobian of <code>f</code> to implicit algorithms. In my current implementation, they just assume it is dense and therefore waste a lot of time computing it by finite-differences without coloring or any similar sparsity-based optimisation...</p>\n<p>Therefore, I have two questions:</p>\n<ol>\n<li>If I have a Python function that generates a (possibly) sparse Jacobian for <code>f</code>, how can I plug it in the <code>diffeqpy</code> package ?</li>\n<li>In most cases, my Jacobian is pentadiaognal, or at least its bandwidth is known. Is there any easy way to pass that information to Julia via Python ?</li>\n</ol>\n<p>Here is a small example that can serve as a quick test platform for potential solutions:</p>\n<pre class=\"lang-py prettyprint-override\"><code>\nfrom julia.api import Julia\njl = Julia(compiled_modules=False)\nfrom diffeqpy import de\nimport numpy as np\nfrom scipy.sparse import identity\nfrom scipy.integrate import solve_ivp\nimport matplotlib.pyplot as plt\n\n\nn = 10 # dimension\natol = 1e-7\nrtol = 1e-6\ntspan = (0., 1.)\n\nu0 = np.linspace(0.1, 10, n)\ndef f(u,p,t):\n    return -2*u\n\ndef df(u,p,t):\n    # return -2. * np.eye(n)\n    return -2. * identity(n)\n  \n\n\nprob = de.ODEProblem(f, u0, tspan) # works\n# prob = de.ODEProblem(f, u0, tspan, jac=df) # fails\nsol = de.solve(prob, alg=de.RadauIIA5(autodiff=False), abstol=atol, reltol=rtol)\n\nsol2 = solve_ivp(fun=lambda t,y: f(y,None,t),\n                 y0=u0, method='Radau', t_span=tspan,\n                 atol=atol, rtol=rtol, jac=lambda t,y: df(y,None,t) )\n\nplt.figure()\nplt.plot(sol.t,  sol.u, color='tab:red')\nplt.plot(sol2.t, sol2.y.T, linestyle='--', linewidth=3, color='tab:blue')\nplt.xlabel('t')\nplt.ylabel('u')\nplt.grid()\nplt.show()\n</code></pre>\n"
  ],
  "How to ignore IndexError in while/for loops?": [
    "https://stackoverflow.com/questions/75949991/how-to-ignore-indexerror-in-while-for-loops",
    "<p>I need to find index of value &quot;1.2 Information&quot; in table.</p>\n<p>Where's only one value like this, and it could be at any column.\nI got this code to find it, but I get IndexError in first column.\nHow to ignore error and continue loop?</p>\n<p>I know that I can do this with 'continue', can't understand how.</p>\n<pre><code>ind = &quot;&quot;\ncols = list(df.columns)\nwhile type(ind) != int:\n    for col in cols:\n        ind = int(df[df[col].str.contains('^1.2 Information') == True].index[0])\n</code></pre>\n<p>Thanks.</p>\n"
  ],
  "Group by and concatenate the columns in pandas dataframe": [
    "https://stackoverflow.com/questions/75949872/group-by-and-concatenate-the-columns-in-pandas-dataframe",
    "<p>I have following dataframe.</p>\n<pre><code>  id1          id2          id3   lan term      \n0 100000000006 100000023268 10000 en  Abnormal pain\n1 100000000006 100000023268 10000 zh  jhkghdgh \n2 100000000006 100000023268 10000 cs  ghjdgfhgd \n3 100000000006 100000023268 10000 nl  jgfhgjhgfh\n4 100000000006 100000023268 10000 fr  hgdhfghjgeh\n</code></pre>\n<p>I would like to group by column id1, id2, id3 and concatenate the 'term' column values where lan is not 'en' and create a new column for this. The expected dataframe is:</p>\n<pre><code>  id1          id2          id3     term            synonyms\n0 100000000006 100000023268 10000   Abnormal pain   jhkghdgh |ghjdgfhgd |jgfhgjhgfh|hgdhfghjgeh\n\n</code></pre>\n<p>How can I achive this. I am using below code but without any filter on 'lan' column.</p>\n<pre><code>join_unique = lambda x: '|'.join(x.unique())\ndf_meddra_qtt = df_meddra.groupby(['id1', 'id2', 'id3'], as_index=False).agg(join_unique)\n</code></pre>\n"
  ],
  "How do I get python to bring up a display(of text) in the middle of my screen?": [
    "https://stackoverflow.com/questions/75949748/how-do-i-get-python-to-bring-up-a-displayof-text-in-the-middle-of-my-screen",
    "<p>I am using Python 3.10 and am using PyCharm Community edition 2021.2.2 to code in</p>\n<p>I am trying to code it that when a game ends, it will print &quot;'Winner' Wins&quot; in the middle of my screen. The area at which I want it to print is highlighted in yellow to be shown. <a href=\"https://i.stack.imgur.com/rxlSU.png\" rel=\"nofollow noreferrer\">Bit in yellow is where i want it to print</a>.</p>\n<p>I would like it to almost look like this(but without it being notepad, and it being done via python):\n<a href=\"https://i.stack.imgur.com/Am7KY.png\" rel=\"nofollow noreferrer\">the notepad is to show where I would like the display roughly.</a></p>\n<p>If I use print, I have noticed it only shows in the output box, and not in the centre of the screen as I want it to. Is there any way to get python to do what I want it to, and if so what is that way.</p>\n<pre><code>import turtle\nimport mouse\n\nrow1 = [&quot;1     &quot;, &quot;2     &quot;, &quot;3    &quot;]\nrow2 = [&quot;4     &quot;, &quot;5     &quot;, &quot;6    &quot;]\nrow3 = [&quot;7     &quot;, &quot;8     &quot;, &quot;9    &quot;]\n\n\ndef leftclick():\n    pos1x = -250\n    pos1y = 250\n\n    pos2x = 0\n    pos2y = 250\n\n    pos3x = 250\n    pos3y = 250\n\n    pos4x = -250\n    pos4y = -15\n\n    pos5x = 0\n    pos5y = -15\n\n    pos6x = 250\n    pos6y = -15\n\n    pos7x = -250\n    pos7y = -250\n\n    pos8x = 0\n    pos8y = -250\n\n    pos9x = 250\n    pos9y = -250\n\n    mouseclick = True\n    if mouseclick == True:\n        x = mouse.get_position()\n        mouseclick = False\n    if x[0] &gt;= 371 and x[0] &lt;=580 and x[1] &gt;=153 and x[1] &lt;= 413:\n        placementleft = 1\n    if x[0] &gt;=580 and x[0] &lt;=880 and x[1] &gt;=153 and x[1] &lt;=413:\n        placementleft = 2\n    if x[0] &gt;= 880 and x[0] &lt;=1080 and x[1] &gt;=153 and x[1] &lt;=413:\n        placementleft = 3\n    if x[0] &gt;= 371 and x[0] &lt;= 580 and x[1] &gt;= 411 and x[1] &lt;=663:\n        placementleft = 4\n    if x[0] &gt;= 580 and x[0] &lt;= 880 and x[1] &gt;= 411 and x[1] &lt;=663:\n        placementleft = 5\n    if x[0] &gt;= 880 and x[0] &lt;= 1080 and x[1] &gt;= 411 and x[1] &lt;=663:\n        placementleft = 6\n    if x[0] &gt;= 371 and x[0] &lt;= 580 and x[1] &gt;= 664 and x[1] &lt;=864:\n        placementleft = 7\n    if x[0] &gt;= 580 and x[0] &lt;= 880 and x[1] &gt;= 664 and x[1] &lt;=864:\n        placementleft = 8\n    if x[0] &gt;= 880 and x[0] &lt;= 1080 and x[1] &gt;= 664 and x[1] &lt;=864:\n        placementleft = 9\n    count = 0\n\n\n\n\n    if placementleft == 1:\n        drawcross(pos1x, pos1y)\n        row1[0] = &quot;x     &quot;\n    if placementleft == 2:\n        drawcross(pos2x, pos2y)\n        row1[1] = &quot;x     &quot;\n    if placementleft == 3:\n        drawcross(pos3x, pos3y)\n        row1[2] = &quot;x     &quot;\n    if placementleft == 4:\n        drawcross(pos4x, pos4y)\n        row2[0] = &quot;x     &quot;\n    if placementleft == 5:\n        drawcross(pos5x, pos5y)\n        row2[1] = &quot;x     &quot;\n    if placementleft == 6:\n        drawcross(pos6x, pos6y)\n        row2[2] = &quot;x     &quot;\n    if placementleft == 7:\n        drawcross(pos7x, pos7y)\n        row3[0] = &quot;x     &quot;\n    if placementleft == 8:\n        drawcross(pos8x, pos8y)\n        row3[1] = &quot;x     &quot;\n    if placementleft == 9:\n        drawcross(pos9x, pos9y)\n        row3[2] = &quot;x     &quot;\n\n\n    if checkwin(row1, row2, row3) == True:\n        turtle.done\n        mouse.unhook_all()\n        return False\n\n\n\ndef rightclick():\n    pos1x = -250\n    pos1y = 250\n\n    pos2x = 0\n    pos2y = 250\n\n    pos3x = 250\n    pos3y = 250\n\n    pos4x = -250\n    pos4y = -15\n\n    pos5x = 0\n    pos5y = -15\n\n    pos6x = 250\n    pos6y = -15\n\n    pos7x = -250\n    pos7y = -250\n\n    pos8x = 0\n    pos8y = -250\n\n    pos9x = 250\n    pos9y = -250\n\n\n    mouseclick = True\n    if mouseclick == True:\n        x = mouse.get_position()\n        mouseclick = False\n    if x[0] &gt;= 371 and x[0] &lt;=580 and x[1] &gt;=153 and x[1] &lt;= 413:\n        placementright = 1\n    if x[0] &gt;=580 and x[0] &lt;=880 and x[1] &gt;=153 and x[1] &lt;=413:\n        placementright = 2\n    if x[0] &gt;= 880 and x[0] &lt;=1080 and x[1] &gt;=153 and x[1] &lt;=413:\n        placementright = 3\n    if x[0] &gt;= 371 and x[0] &lt;= 580 and x[1] &gt;= 411 and x[1] &lt;=663:\n        placementright = 4\n    if x[0] &gt;= 580 and x[0] &lt;= 880 and x[1] &gt;= 411 and x[1] &lt;=663:\n        placementright = 5\n    if x[0] &gt;= 880 and x[0] &lt;= 1080 and x[1] &gt;= 411 and x[1] &lt;=663:\n        placementright = 6\n    if x[0] &gt;= 371 and x[0] &lt;= 580 and x[1] &gt;= 664 and x[1] &lt;=864:\n        placementright = 7\n    if x[0] &gt;= 580 and x[0] &lt;= 880 and x[1] &gt;= 664 and x[1] &lt;=864:\n        placementright = 8\n    if x[0] &gt;= 880 and x[0] &lt;= 1080 and x[1] &gt;= 664 and x[1] &lt;=864:\n        placementright = 9\n\n\n\n\n\n    if placementright == 1:\n        drawcircle(pos1x, pos1y)\n        row1[0] = &quot;O     &quot;\n    if placementright == 2:\n        drawcircle(pos2x, pos2y)\n        row1[1] = &quot;O     &quot;\n    if placementright == 3:\n        drawcircle(pos3x, pos3y)\n        row1[2] = &quot;O     &quot;\n    if placementright == 4:\n        drawcircle(pos4x, pos4y)\n        row2[0] = &quot;O     &quot;\n    if placementright == 5:\n        drawcircle(pos5x, pos5y)\n        row2[1] = &quot;O     &quot;\n    if placementright == 6:\n        drawcircle(pos6x, pos6y)\n        row2[2] = &quot;O     &quot;\n    if placementright == 7:\n        drawcircle(pos7x, pos7y)\n        row3[0] = &quot;O     &quot;\n    if placementright == 8:\n        drawcircle(pos8x, pos8y)\n        row3[1] = &quot;O     &quot;\n    if placementright == 9:\n        drawcircle(pos9x, pos9y)\n        row3[2] = &quot;O     &quot;\n\n    if checkwin(row1, row2, row3) == True:\n        turtle.done\n        mouse.unhook_all()\n        return False\n\n\n\n\n#   positions:\npos1x = -250\npos1y = 250\n\npos2x = 0\npos2y = 250\n\npos3x = 250\npos3y = 250\n\npos4x = -250\npos4y = -15\n\npos5x = 0\npos5y = -15\n\npos6x = 250\npos6y = -15\n\npos7x = -250\npos7y = -250\n\npos8x = 0\npos8y = -250\n\npos9x = 250\npos9y = -250\n\n#   turtles:\nnoughtturtle = turtle.Turtle()\ncrossturtle = turtle.Turtle()\nboredturtle = turtle.Turtle()\nlineturtle = turtle.Turtle()\n\n#   functions\ndef drawboard():\n    boredturtle.penup()\n    boredturtle.speed(9)\n\n    boredturtle.forward(150)\n    boredturtle.right(90)\n    boredturtle.pendown()\n    boredturtle.forward(400)\n    boredturtle.back(800)\n\n    boredturtle.forward(300)\n    boredturtle.right(90)\n    boredturtle.back(300)\n    boredturtle.forward(900)\n\n    boredturtle.back(300)\n    boredturtle.left(90)\n    boredturtle.back(300)\n    boredturtle.forward(850)\n\n    boredturtle.back(300)\n    boredturtle.left(90)\n    boredturtle.back(300)\n    boredturtle.forward(900)\n    boredturtle.back(300)\n    boredturtle.hideturtle()\n\ndef drawcross(x, y):\n    crossturtle.penup()\n    crossturtle.home()\n    crossturtle.hideturtle()\n    crossturtle.setposition(x,y)\n    crossturtle.pendown()\n    crossturtle.right(45)\n    crossturtle.forward(100)\n    crossturtle.back(200)\n    crossturtle.forward(100)\n    crossturtle.right(90)\n    crossturtle.forward(100)\n    crossturtle.back(200)\n\ndef drawcircle(x, y):\n    noughtturtle.penup()\n    noughtturtle.home()\n    noughtturtle.hideturtle()\n    noughtturtle.setposition(x,y)\n    noughtturtle.back(75)\n    noughtturtle.right(90)\n    noughtturtle.pendown()\n    noughtturtle.circle(75)\n\ndef checkwin(row1, row2, row3):\n    if row1[0] == row2[0] == row3[0] and row1[0] == &quot;x     &quot;:\n        drawline(4)\n        print(&quot;x wins&quot;)\n        return True\n    if row1[0] == row2[0] == row3[0] and row1[0] == &quot;O     &quot;:\n        drawline(4)\n        print(&quot;O wins&quot;)\n        return True\n    if row1[0] == row1[1] == row1[2] and row1[0] == &quot;x     &quot;:\n        drawline(1)\n        print(&quot;x wins&quot;)\n        return True\n    if row1[0] == row1[1] == row1[2] and row1[0] == &quot;O     &quot;:\n        drawline(1)\n        print(&quot;O wins&quot;)\n        return True\n    if row1[0] == row2[1] == row3[2] and row1[0] == &quot;x     &quot;:\n        drawline(7)\n        print(&quot;x wins&quot;)\n        return True\n    if row1[0] == row2[1] == row3[2] and row1[0] == &quot;O     &quot;:\n        drawline(7)\n        print(&quot;O wins&quot;)\n        return True\n    if row1[1] == row2[1] == row3[1] and row1[1] == &quot;x     &quot;:\n        drawline(5)\n        print(&quot;x wins&quot;)\n        return True\n    if row1[1] == row2[1] == row3[1] and row1[1] == &quot;O     &quot;:\n        drawline(5)\n        print(&quot;O wins&quot;)\n        return True\n    if row1[2] == row2[2] == row3[2] and row1[2] == &quot;x     &quot;:\n        drawline(6)\n        print(&quot;x wins&quot;)\n        return True\n    if row1[2] == row2[2] == row3[2] and row1[2] == &quot;O     &quot;:\n        drawline(6)\n        print(&quot;O wins&quot;)\n        return True\n    if row2[0] == row2[1] == row2[2] and row2[2] == &quot;x     &quot;:\n        drawline(2)\n        print(&quot;x wins&quot;)\n        return True\n    if row2[0] == row2[1] == row2[2] and row2[2] == &quot;O     &quot;:\n        drawline(2)\n        print(&quot;O wins&quot;)\n        return True\n    if row3[0] == row3[1] == row3[2] and row3[2] == &quot;x     &quot;:\n        drawline(3)\n        print(&quot;x wins&quot;)\n        return True\n    if row3[0] == row3[1] == row3[2] and row3[2] == &quot;O     &quot;:\n        drawline(3)\n        print(&quot;O wins&quot;)\n        return True\n    if row3[0] == row2[1] == row1[2] and row3[2] == &quot;x     &quot;:\n        drawline(8)\n        print(&quot;x wins&quot;)\n        return True\n    if row3[0] == row2[1] == row1[2] and row3[2] == &quot;O     &quot;:\n        drawline(8)\n        print(&quot;O wins&quot;)\n        return True\n    return False\n\ndef mainprogram():\n    drawboard()\n    count = 0\n    row1 = [&quot;1     &quot;, &quot;2     &quot;, &quot;3    &quot;]\n    row2 = [&quot;4     &quot;, &quot;5     &quot;, &quot;6    &quot;]\n    row3 = [&quot;7     &quot;, &quot;8     &quot;, &quot;9    &quot;]\n    while row1[0] == &quot;1     &quot; or row1[1] == &quot;2     &quot; or row1[2] == &quot;3    &quot; or row2[0] == &quot;4     &quot; or row2[1] == &quot;5     &quot; or row2[2] == &quot;6    &quot; or row3[0] == &quot;7     &quot; or row3[1] == &quot;8     &quot; or row3[2] == &quot;9    &quot;:\n        if checkwin(row1, row2, row3) == True:\n            break\n\n        if count == 0:\n            print(row1)\n            print(row2)\n            print(row3)\n            placement = int(input(&quot;Where do you want to place your cross: &quot;))\n            if placement == 1:\n                drawcross(pos1x, pos1y)\n                row1[0] = &quot;x     &quot;\n            if placement == 2:\n                drawcross(pos2x, pos2y)\n                row1[1] = &quot;x     &quot;\n            if placement == 3:\n                drawcross(pos3x, pos3y)\n                row1[2] = &quot;x     &quot;\n            if placement == 4:\n                drawcross(pos4x, pos4y)\n                row2[0] = &quot;x     &quot;\n            if placement == 5:\n                drawcross(pos5x, pos5y)\n                row2[1] = &quot;x     &quot;\n            if placement == 6:\n                drawcross(pos6x, pos6y)\n                row2[2] = &quot;x     &quot;\n            if placement == 7:\n                drawcross(pos7x, pos7y)\n                row3[0] = &quot;x     &quot;\n            if placement == 8:\n                drawcross(pos8x, pos8y)\n                row3[1] = &quot;x     &quot;\n            if placement == 9:\n                drawcross(pos9x, pos9y)\n                row3[2] = &quot;x     &quot;\n            count = 1\n\n        elif count == 1 and checkwin(row1, row2, row3) == False:\n            print(row1)\n            print(row2)\n            print(row3)\n            placement = int(input(&quot;Where do you want to place your nought: &quot;))\n            if placement == 1:\n                drawcircle(pos1x, pos1y)\n                row1[0] = &quot;O     &quot;\n            if placement == 2:\n                drawcircle(pos2x, pos2y)\n                row1[1] = &quot;O     &quot;\n            if placement == 3:\n                drawcircle(pos3x, pos3y)\n                row1[2] = &quot;O     &quot;\n            if placement == 4:\n                drawcircle(pos4x, pos4y)\n                row2[0] = &quot;O     &quot;\n            if placement == 5:\n                drawcircle(pos5x, pos5y)\n                row2[1] = &quot;O     &quot;\n            if placement == 6:\n                drawcircle(pos6x, pos6y)\n                row2[2] = &quot;O     &quot;\n            if placement == 7:\n                drawcircle(pos7x, pos7y)\n                row3[0] = &quot;O     &quot;\n            if placement == 8:\n                drawcircle(pos8x, pos8y)\n                row3[1] = &quot;O     &quot;\n            if placement == 9:\n                drawcircle(pos9x, pos9y)\n                row3[2] = &quot;O     &quot;\n            count = 0\n\n    checkwin(row1, row2, row3)\n\ndef drawline(whereplace):\n    lineturtle.hideturtle()\n    lineturtle.pencolor(&quot;red&quot;)\n    lineturtle.pensize(5)\n    lineturtle.penup()\n    if whereplace == 1:\n        lineturtle.setposition(-250, 250)\n        lineturtle.pendown()\n        lineturtle.setposition(250, 250)\n    elif whereplace == 2:\n        lineturtle.setposition(-250, -15)\n        lineturtle.pendown()\n        lineturtle.setposition(250, -15)\n    elif whereplace == 3:\n        lineturtle.setposition(-250, -250)\n        lineturtle.pendown()\n        lineturtle.setposition(250, -250)\n    elif whereplace == 4:\n        lineturtle.setposition(-250, 250)\n        lineturtle.pendown()\n        lineturtle.setposition(-250, -250)\n    elif whereplace == 5:\n        lineturtle.setposition(0, 250)\n        lineturtle.pendown()\n        lineturtle.setposition(0, -250)\n    elif whereplace == 6:\n        lineturtle.setposition(250, 250)\n        lineturtle.pendown()\n        lineturtle.setposition(250, -250)\n    elif whereplace == 7:\n        lineturtle.setposition(-250, 250)\n        lineturtle.pendown()\n        lineturtle.setposition(250, -250)\n    elif whereplace == 8:\n        lineturtle.setposition(-250, -250)\n        lineturtle.pendown()\n        lineturtle.setposition(250, 250)\n\n\n#   main program\ndrawboard()\nprint(&quot;Leftclick to place a cross&quot;)\nprint(&quot;Rightclick to place a nought&quot;)\n\n\n\n# make a listener when left button is clicked\nmouse.on_click(lambda: print(&quot;X placed&quot;))\nmouse.on_click(lambda: leftclick())\n# make a listener when right button is clicked\nmouse.on_right_click(lambda: print(&quot;0 placed&quot;))\nmouse.on_right_click(lambda: rightclick())\n\n\n\nturtle.done()\n</code></pre>\n"
  ],
  "Is there a Python module to handle csv files with sections?": [
    "https://stackoverflow.com/questions/75946683/is-there-a-python-module-to-handle-csv-files-with-sections",
    "<p>I'm seeing more and more csv files containing multiple sections, each containing their own table. For instance this file from <a href=\"https://support.10xgenomics.com/single-cell-gene-expression/software/pipelines/latest/using/multi#examples\" rel=\"nofollow noreferrer\">10XGenomics</a>:</p>\n<pre><code>[gene-expression]\nreference,/path/to/transcriptome\n\n[libraries]\nfastq_id,fastqs,feature_types\ngex1,/path/to/fastqs,Gene Expression\nmux1,/path/to/fastqs,Multiplexing Capture\n\n[samples]\nsample_id,cmo_ids\nsample1,CMO301\nsample2,CMO303\n</code></pre>\n<p>Sometimes the section headers are even embedded in their own row, e.g.</p>\n<pre><code>[gene-expression],,\nreference,/path/to/transcriptome,\n[libraries],,\nfastq_id,fastqs,feature_types\ngex1,/path/to/fastqs,Gene Expression\nmux1,/path/to/fastqs,Multiplexing Capture\n[samples],,\nsample_id,cmo_ids,\nsample1,CMO301,\nsample2,CMO303,\n</code></pre>\n<p>Is there a Python module to handle this kind of sectioning directly? I couldn't find how to do it with Pandas or the <code>csv</code> module. E.g. from both examples above I would expect to get a dictionary with one item per section, and then a list of lists for each section.</p>\n<p>Some sections have headers, it would be nice if this could be handled too, e.g. similarly to <code>csv.DictReader</code>.</p>\n<p>Although it's not particularly hard to write a solution that can parse this particular example, producing something that works in the general case is much harder, e.g. parsing a simple csv file is easily done with <code>split</code> and yet the <code>csv</code> module is 400+ lines of Python, and many more lines of C, so what I'm really looking for here is a module to handle this problem in general.</p>\n<p>PS: <a href=\"https://stackoverflow.com/questions/3701696/is-there-a-python-package-to-parse-readable-data-files-with-sections\">this question</a> is related but the answers do not address the point about the csv parser unfortunately</p>\n"
  ],
  "Find element by.ID in headless Chromium, when running on AWS lambda": [
    "https://stackoverflow.com/questions/75948319/find-element-by-id-in-headless-chromium-when-running-on-aws-lambda",
    "<p>I got my selenium chromeDriver running on lambda successfully, but I can't get it to find an element by.ID.\nThe script runs perfectly fine on my local machine. Why does it not work on AWS lambda?</p>\n<p>The Script:</p>\n<pre><code>from selenium.webdriver.chrome.options import Options\n\ndef startDriver():\n    options = Options()\n    options.binary_location = '/opt/headless-chromium'\n    options.add_argument('--headless')\n    options.add_argument('--windows-size=1920,1080')\n    options.add_argument('--start-maximized')\n    options.add_argument('--proxy-server=&quot;direct://&quot;')\n    options.add_argument('--proxy-bypass-list=*')\n    options.add_argument('--no-sandbox')\n    options.add_argument('--ignore-certificate-errors')\n    options.add_argument('--single-process')\n    options.add_argument('--disable-dev-shm-usage')\n    options.add_argument('--disable-extensions')\n    options.add_argument('--disable-gpu')\n\n\n    driver = webdriver.Chrome('/opt/chromedriver', chrome_options=options)\n    return driver\n\nDRIVER = startDriver()\n</code></pre>\n<pre><code>    DRIVER.get(dashboard_url)\n    time.sleep(10)\n    cookieBox = Wait(DRIVER, timeout=20).until(lambda d: DRIVER.find_element(By.ID, 'tru_accept_btn'))\n    cookieBox.click()\n</code></pre>\n<p>When ending the code after <code>DRIVER.get(dashboard_url)</code> I can succesfully return <code>DRIVER.title</code> So I know, the page is loading, but for some reason the element cannot be detected:</p>\n<blockquote>\n<p>[ERROR] TimeoutException: Message:\n\u00a0\u00a0File &quot;/var/task/nestfunctions/_nestfunctions.py&quot;, line 19, in login\ncookieBox = Wait(DRIVER, timeout=20).until(lambda d:\nDRIVER.find_element(By.ID, 'tru_accept_btn'))\nFile &quot;/opt/python/lib/python3.7/site-packages/selenium/webdriver/support/wait.py&quot;,\nline 80, in until raise TimeoutException(message, screen, stacktrace)</p>\n</blockquote>\n"
  ],
  "Smooth curve with loop": [
    "https://stackoverflow.com/questions/75949980/smooth-curve-with-loop",
    "<p>I would like to smooth some curves of my plot (see picture) <a href=\"https://i.stack.imgur.com/9LB7u.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/9LB7u.png\" alt=\"enter image description here\" /></a></p>\n<p>Here is a part of my code:</p>\n<pre><code>for list_csv in list_csvs:\n  i=-1\n  for filepath in list_csv:\n    x=[]\n    y=[]\n    i=i+1\n    with open(filepath,'r',encoding=&quot;utf8&quot;, errors='ignore') as csvfile:\n        plots = csv.reader(csvfile, delimiter = ',')\n        next(plots) # Premi\u00e8re ligne non lue\n        for row in plots:\n                x.append(float(row[1])*multiplicateur+xx[i])\n                y.append(float(row[0]))\n        plt.plot(x, y, color=next(colors), linestyle=next(linestyle), linewidth=linewidth, markersize=3)\n</code></pre>\n<p><code>list_csvs</code> is a vector containing variables <code>list_csvX</code> (X varies between 1 and 4) that are lists of csv files. Each <code>list_csvX</code> contains the paths to 13 csv files used to plot the data.</p>\n<p>I try to add few lines to smooth the data with spline_interpolator:</p>\n<pre><code>        for row in plots:\n            x.append(float(row[1])*multiplicateur+xx[i])\n            y.append(float(row[0]))\n            X_Y_Spline = make_interp_spline(x, y)\n            Y_ = np.linspace(y.min(), y.max(), 500)\n            X_ = X_Y_Spline(Y_)\n        plt.plot(x, y, color=next(colors), linestyle=next(linestyle), linewidth=linewidth, markersize=3)\n</code></pre>\n<p>But I obtain the following error:</p>\n<blockquote>\n<p>ValueError: The number of derivatives at boundaries does not match:\nexpected 3, got 0+0</p>\n</blockquote>\n<p>I also try to use <code>LOWESS</code>:</p>\n<pre><code>           for row in plots:\n                x.append(float(row[1])*multiplicateur+xx[i])\n                y.append(float(row[0]))\n                lowess = sm.nonparametric.lowess(y, x, frac=0.2)\n        plt.plot(lowess[:, 0], lowess[:, 1], color=next(colors), linestyle=next(linestyle), linewidth=linewidth, markersize=3)\n</code></pre>\n<p>But the results are stranges see <a href=\"https://i.stack.imgur.com/ScwuM.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ScwuM.png\" alt=\"enter image description here\" /></a></p>\n<p>May you help me to smooth these curve?</p>\n<p>Thanks a lot!</p>\n"
  ],
  "python error AttributeError: &#39;InstalledAppFlow&#39; object has no attribute &#39;run_console&#39; - when authenticating for google API on google colab": [
    "https://stackoverflow.com/questions/75949859/python-error-attributeerror-installedappflow-object-has-no-attribute-run-con",
    "<p>I have been using a python script which I run from Google Colab to generate documents for about a year now.\nNothing was changed to my code (and I double checked this by testing an older\nversion of the program which gave me the same problem) but since the last few days\nI keep getting an error that I can't resolve.</p>\n<p>This is the relevant part of the program:</p>\n<pre><code>from __future__ import print_function\nimport sys\nimport os.path\nfrom datetime import date, timedelta\nfrom google.auth.transport.requests import Request\nfrom google.oauth2.credentials import Credentials\nfrom google_auth_oauthlib.flow import InstalledAppFlow\nfrom googleapiclient.discovery import build\nfrom googleapiclient.errors import HttpError\nfrom google_auth_oauthlib.flow import InstalledAppFlow\nimport googleapiclient.discovery as discovery\nfrom httplib2 import Http\nimport google.auth\nimport datetime as datetime\nfrom dateutil.relativedelta import *\nimport pytz\n\n# If modifying these scopes, delete the file token.json.\nSCOPES = ['https://www.googleapis.com/auth/drive',\n          'https://www.googleapis.com/auth/documents',\n          'https://www.googleapis.com/auth/contacts',\n          'https://www.googleapis.com/auth/spreadsheets']\n\n\ncreds = None\n# The file token.json stores the user's access and refresh tokens, and is\n# created automatically when the authorization flow completes for the first\n# time.\nif os.path.exists('token.json'):\n    creds = Credentials.from_authorized_user_file('token.json', SCOPES)\n\n# If there are no (valid) credentials available, let the user log in.\nif not creds or not creds.valid:\n    if creds and creds.expired and creds.refresh_token:\n        creds.refresh(Request())\n    else:\n        flow = InstalledAppFlow.from_client_secrets_file(\n            '/content/drive/MyDrive/geneeskunde/The_administrator/credentials.json', SCOPES)\n        \n        auth_uri = flow.authorization_url()\n        # Redirect the user to auth_uri on your platform.\n\n            \n        #creds = flow.run_local_server(port=0)\n        #The following line allowed me to authenticate through Google Colab:\n        creds = flow.run_console()\n    # Save the credentials for the next run\n    with open('token.json', 'w') as token:\n        token.write(creds.to_json())\n\n#Build services required for the google API's:\npeopleservice = build('people', 'v1', credentials=creds)\ndriveservice = build('drive', 'v3', credentials=creds)\ndocservice = build('docs', 'v1', credentials=creds)\nsheetservice = build('sheets', 'v4', credentials=creds)\n</code></pre>\n<p>The error I get in Google Colab is the following:</p>\n<pre><code>---------------------------------------------------------------------------\nAttributeError                            Traceback (most recent call last)\n&lt;ipython-input-39-8d35889d45f8&gt; in &lt;cell line: 211&gt;()\n    220 \n    221         #creds = flow.run_local_server(port=0)\n--&gt; 222         creds = flow.run_console()\n    223     # Save the credentials for the next run\n    224     with open('token.json', 'w') as token:\n\nAttributeError: 'InstalledAppFlow' object has no attribute 'run_console'\n</code></pre>\n<p>I tried to solve this issue myself and on <a href=\"https://stackoverflow.com/questions/75602866/google-oauth-attributeerror-installedappflow-object-has-no-attribute-run-cothey\">\u3010Google OAuth\u3011AttributeError: &#39;InstalledAppFlow&#39; object has no attribute &#39;run_console&#39;</a> describe exactly this problem with the following solution:</p>\n<pre><code>Expanding on George's answer above, the versions of the library from the github post that work are:\n\ngoogle-api-python-client==1.7.2\ngoogle-auth==1.8.0\ngoogle-auth-httplib2==0.0.3\ngoogle-auth-oauthlib==0.4.1\n\n</code></pre>\n<p>I tried installing these versions on my colab session using</p>\n<pre><code>!pip install google-api-python-client==1.7.2\n!pip install google-auth==1.8.0\n...\n</code></pre>\n<p>Unfortunately the same error reappeared.</p>\n<p>I found extra info on the run_console function on this site:\n<a href=\"https://google-auth-oauthlib.readthedocs.io/en/latest/reference/google_auth_oauthlib.flow.html\" rel=\"nofollow noreferrer\">https://google-auth-oauthlib.readthedocs.io/en/latest/reference/google_auth_oauthlib.flow.html</a></p>\n<p>But I can't seem to fix this issue.</p>\n<p>Any help or insight would be most appreciated.</p>\n<p>Regards,</p>\n<p>Usui</p>\n"
  ],
  "Struggling with batch processing in Azure Table Storage locally": [
    "https://stackoverflow.com/questions/75949975/struggling-with-batch-processing-in-azure-table-storage-locally",
    "<p>I have these batches that contain more than 100 entities that I'm trying to split to send in my local Azure storage account (Azurite):</p>\n<pre class=\"lang-py prettyprint-override\"><code>def save_results_in_database(self, operations, table_name):\n        table = self.table_service_client.get_table_client(table_name)\n        if table_name is None:\n            raise Exception(f&quot;Table {table_name} does not exist !&quot;)\n        try:\n            table.submit_transaction(operations)\n        except Exception as e:\n            logging.exception(\n                f&quot;Error while saving results in database for table {table_name}&quot;\n            )\n\nif 0 &lt; len(results) &lt; 100:\n        helpers.save_results_in_database(results, action)\n    else:\n        # if the number of results is greater than 100, we need to split them in batches of 50\n        # and save them in batches\n        batch_size = 50\n        for i in range(0, len(results), batch_size):\n            batch = results[i : i + batch_size]\n            helpers.save_results_in_database(batch, action)\n            sleep(10)\n</code></pre>\n<p>And for some reason somes batches pass and some don't. For example if I have 107 entities to push, the first 50 pass, the second 50 doesn't and the remaining 7 pass.</p>\n<p>I tried putting some sleep but I'm not sure it actually helps.\nHere's the error message:</p>\n<pre><code>Error while saving results in database for table &lt;table name&gt;\nFile &quot;/usr/local/lib/python3.10/site-packages/azure/data/tables/_table_client.py&quot;, line 734, in submit_transaction\nreturn self._batch_send(self.table_name, *batched_requests.requests, **kwargs)  # type: ignore\n File &quot;/usr/local/lib/python3.10/site-packages/azure/data/tables/_base_client.py&quot;, line 334, in _batch_send\n    raise decoded\nazure.data.tables._error.TableTransactionError: 2:An error occurred while processing this request.\nErrorCode:InvalidInput\nContent: {&quot;odata.error&quot;:{&quot;code&quot;:&quot;InvalidInput&quot;,&quot;message&quot;:{&quot;lang&quot;:&quot;en-US&quot;,&quot;value&quot;:&quot;2:An error occurred while processing this request.\\nRequestId:994b1eca-1109-4ff9-aa56-0dc73ae97a18\\nTime:2023-04-06T13:08:29.278Z&quot;}}}\n</code></pre>\n<p>Am I missing something? Because I'm fairly certain that the input is valid schema-wise.\nTIA</p>\n"
  ],
  "How do I use if function from python file in my kv file using KivyMD": [
    "https://stackoverflow.com/questions/75949966/how-do-i-use-if-function-from-python-file-in-my-kv-file-using-kivymd",
    "<p>I'm doing a signup screen and I'm trying to get a button to switch screens if certain conditions for the inputs are met. I created an if function in my python file that's in the Screen class where my button is.</p>\n<p>Some of the conditions use other functions I've made - checkNumAl() and checkAl(), which checks if there is at least one number and letter or at least one letter. These do not work in my kv file which is why I've made the if function in my python file.</p>\n<p>Now I don't know how to get my button in my kv file to check a condition in my python function, or more like I don't know how to flag that the conditions are met.</p>\n<p><a href=\"https://i.stack.imgur.com/Jj82T.png\" rel=\"nofollow noreferrer\">Python file - check for letters and numbers functions</a></p>\n<p><a href=\"https://i.stack.imgur.com/kw4AJ.png\" rel=\"nofollow noreferrer\">Python file - Signup screen</a></p>\n<p><a href=\"https://i.stack.imgur.com/eCbR3.png\" rel=\"nofollow noreferrer\">kv file - submit button</a></p>\n<p>When I run the app works but nothing happens when I click the submit button.\nI tried lots of different things but I don't know what to return and set as the condition in my kv file. Also, I'm using KivyMD and I can't do anything with a ScreenManager in my python file.\nWhat should I do?</p>\n"
  ],
  "Why django form is submitted but the valued is null in the database?": [
    "https://stackoverflow.com/questions/75911862/why-django-form-is-submitted-but-the-valued-is-null-in-the-database",
    "<p>We have a model called <code>Column</code>, and we want user to be able to create <code>Table</code> model based on <code>Column</code> model fields he created, we successfully do that using the method below:</p>\n<pre><code>def create_table(request):\n    columns = Column.objects.filter(user=request.user)\n\n    fields = {}\n    for column in columns:\n        if column.field_type.data_type == 'number':\n            fields[column.name] = forms.IntegerField()\n\n        elif column.field_type.data_type == 'character':\n            fields[column.name] = forms.CharField(max_length=20)\n\n        elif column.field_type.data_type == 'decimal':\n            fields[column.name] = forms.DecimalField(max_digits=20, decimal_places=10)\n\n        elif column.field_type.data_type == 'image':\n            fields[column.name] = forms.ImageField()\n\n        elif column.field_type.data_type == 'boolean':\n            fields[column.name] = forms.BooleanField()\n\n        elif column.field_type.data_type == 'date':\n            fields[column.name] = forms.DateField()\n    TableForm = type('TableForm', (forms.Form,), fields)\n\n    if request.method == 'POST':\n        form = TableForm(request.POST, request.FILES)\n\n        if form.is_valid():\n            table = Table()\n            table.user = user=request.user\n\n            for column in columns:\n                setattr(table, column.name, form.cleaned_data[column.name])\n            table.save()\n            return redirect('Table')\n    else:\n        form = TableForm()\n    return render (request, 'create_table.html', {'form':form})\n</code></pre>\n<p>As you can see our view, our users can create <code>Table</code> model based on a <code>Column</code> model fields they created, but when the form is submitted, the value created from <code>TableForm</code> is none in the database, but the user that create those value is display in the user field that has <code>foreignkey</code>, how can we solve this problem?</p>\n<p>the models:</p>\n<pre><code>class Type(models.Model):\n    TYPE_OF_DATA = (\n        ('Number', 'Number'),\n        ('character', 'character'),\n        ('check_box', 'check_box'),\n        ('date', 'date'),\n        ('image', 'image'),\n             )\n    data_type = models.CharField(max_length=1000, choices= TYPE_OF_DATA)\n \n\nclass Column(models.Model):\n    user = models.ForeignKey(User, on_delete=models.CASCADE)\n    list_of_album = models.ForeignKey(Album, on_delete=models.CASCADE)\n    name = models.CharField(max_length=20, blank=True, null=True)\n    field_type = models.ForeignKey(Type, on_delete=models.CASCADE, blank=True, null=True)\n\n    def __str__(self):\n        return str(self.name) \n\nclass Table(models.Model):\n    user = models.ForeignKey(User, on_delete=models.CASCADE)\n    number = models.IntegerField(blank=True, null=True)\n    decimal = models.DecimalField(max_digits=20, decimal_places=10, blank=True, null=True)\n    image =  models.ImageField(upload_to='table-image', blank=True, null=True)\n    character = models.CharField(max_length=500, blank=True, null=True)\n    check_box = models.BooleanField(blank=True, null=True)\n    date = models.DateField(blank=True, null=True)\n</code></pre>\n"
  ],
  "How to convert an 8bpp bitmap to 1bpp bitmap in Python": [
    "https://stackoverflow.com/questions/75948844/how-to-convert-an-8bpp-bitmap-to-1bpp-bitmap-in-python",
    "<p>I have some code which is fine for creating greyscale (8bpp) images but I need to create 1bpp (binary) also for a printer. I have seen 2 posts here but cannot understand how they fix the issue.\n<a href=\"https://stackoverflow.com/questions/21067028/cant-format-bmp-image-data-to-1-bit-per-pixel-in-pil\">Can&#39;t format BMP image data to 1 bit per pixel in PIL</a>\nI have pillow installed but call it using PIL as all the tutorials I have read seem to say to import Image from PIL.</p>\n<p>I have a method called conv_to_1bpp which sets anything at 255 equal to 1, this is still making 8bpp images though.</p>\n<p><strong>Code</strong></p>\n<pre><code>from PIL import Image\nimport numpy as np\nimport os\nimport sys\nimport struct\n\n\nclass BmpMaker:\n\n    def __init__(self):\n        self.ffp = None\n        self.img_width = None\n        self.img_height = None\n        self.ws_activation = None\n        self.bpp = None\n\n    def make_image(self, img_width, img_height, ws_activation):\n        &quot;&quot;&quot;Creates a bitmap.&quot;&quot;&quot;\n\n        self.ffp = None\n        self.img_width = img_width\n        self.img_height = img_height\n        self.ws_activation = ws_activation\n       \n        # Create new black image - L mode for b/w\n        img = Image.new('L', (img_width, img_height))\n        # Convert to Numpy array for easy processing\n        na = np.array(img)\n        # set the amount of white space activation\n        white_rows = ws_activation\n        # make white lines\n        na[0:white_rows, 0:999] = 255\n        # Revert to PIL Image from Numpy array and save\n        self.ffp = self.make_img_title(img_width, img_height, ws_activation)\n        Image.fromarray(na).save(self.ffp)\n        self.bpp = self.get_bitdepth()\n        return self.ffp\n\n    def make_img_title(self, img_width, img_height, ws_activation):\n        if ws_activation == 0:\n            mystr = f&quot;{img_height}x{img_width}&quot;\n        elif ws_activation is not None:\n            mystr = f&quot;{ws_activation}_{img_height}x{img_width}&quot;\n        self.ffp = os.path.join(os.getcwd(), mystr + &quot;.bmp&quot;)\n        print(&quot;img_ffp : &quot;, self.ffp)\n        return self.ffp\n\n    def get_bitdepth(self):\n        # Read first 100 bytes\n        with open(self.ffp, 'rb') as f:\n            BMP = f.read(100)\n\n        if BMP[0:2] != b'BM':\n            sys.exit('ERROR: Incorrect BMP signature')\n\n        # Get BITMAPINFOHEADER size - https://en.wikipedia.org/wiki/BMP_file_format\n        BITMAPINFOHEADERSIZE = struct.unpack('&lt;i', BMP[14:18])[0]\n        okSizes = [40, 52, 56, 108, 124]\n        if BITMAPINFOHEADERSIZE not in okSizes:\n            sys.exit(f'ERROR: BITMAPINFOHEADER size was {BITMAPINFOHEADERSIZE},'\n                     f' expected one of {okSizes}')\n\n        # Get bits per pixel\n        self.bpp = struct.unpack('&lt;H', BMP[28:30])[0]\n        print(f'bbp: {self.bpp}')\n        return self.bpp\n\n    def get_img_bitdepth(self, img):\n        # Read first 100 bytes\n        with open(img, 'rb') as f:\n            BMP = f.read(100)\n\n        if BMP[0:2] != b'BM':\n            sys.exit('ERROR: Incorrect BMP signature')\n\n        # Get BITMAPINFOHEADER size - https://en.wikipedia.org/wiki/BMP_file_format\n        BITMAPINFOHEADERSIZE = struct.unpack('&lt;i', BMP[14:18])[0]\n        okSizes = [40, 52, 56, 108, 124]\n        if BITMAPINFOHEADERSIZE not in okSizes:\n            sys.exit(f'ERROR: BITMAPINFOHEADER size was {BITMAPINFOHEADERSIZE},'\n                     f' expected one of {okSizes}')\n\n        # Get bits per pixel\n        img_bpp = struct.unpack('&lt;H', BMP[28:30])[0]\n        print(f'bbp: {img_bpp}')\n        return img_bpp\n\n    def conv_to_1bpp(self):\n        img = Image.open(self.ffp)\n        arr = np.array(img)\n        #print(arr)\n        # Set all values at indices where the array equals 255 to 1.\n        arr[arr==255] = 1\n        print('\\n'*3, arr)\n        Image.fromarray(arr).save(&quot;my_img.bmp&quot;)\n        print(self.get_img_bitdepth(&quot;my_img.bmp&quot;))\n\n\nif __name__ == &quot;__main__&quot;:\n    import PIL\n    print('Pillow Version:', PIL.__version__)\n    bm = BmpMaker()\n    base_image = bm.make_image(1000, 8, 5)\n\n    print(&quot;bitmap ffp: &quot;, bm.ffp)\n    print(&quot;bitmap bitdepth : &quot;, bm.bpp)\n    bm.conv_to_1bpp()\n</code></pre>\n"
  ],
  "How do you merge two 3D figures together in python?": [
    "https://stackoverflow.com/questions/75949932/how-do-you-merge-two-3d-figures-together-in-python",
    "<p>So, for this code I need to merge the meshes of two different .stl files I have on hand. Both of them are pretty big, but they have no problem loading up when I plot them without merging.</p>\n<p>I tried both pyvista and VTK packages, and both show the same error: that there are no points or cells to operate on. How do I fix this?</p>\n<pre><code>import vtk\nimport tkinter as tk\nfrom tkinter import filedialog\n\nroot = tk.Tk()\nroot.withdraw()\nfile_path1 = filedialog.askopenfilename(filetypes=[(&quot;STL files&quot;, &quot;*.stl&quot;)])\nfile_path2 = filedialog.askopenfilename(filetypes=[(&quot;STL files&quot;, &quot;*.stl&quot;)])\n\nreader1 = vtk.vtkSTLReader()\nreader1.SetFileName(file_path1)\nreader1.Update()\n\nreader2 = vtk.vtkSTLReader()\nreader2.SetFileName(file_path2)\nreader2.Update()\n\nboolean = vtk.vtkBooleanOperationPolyDataFilter()\nboolean.SetInputData(0, reader1.GetOutput())\nboolean.SetInputData(1, reader2.GetOutput())\nboolean.SetOperationToUnion()\nboolean.Update()\n\nmapper = vtk.vtkPolyDataMapper()\nmapper.SetInputConnection(boolean.GetOutputPort())\n\nactor = vtk.vtkActor()\nactor.SetMapper(mapper)\n\nrenderer = vtk.vtkRenderer()\nrenderer.AddActor(actor)\n\nrender_window = vtk.vtkRenderWindow()\nrender_window.SetSize(640, 480)\nrender_window.AddRenderer(renderer)\n\ninteractor = vtk.vtkRenderWindowInteractor()\ninteractor.SetRenderWindow(render_window)\n\nrender_window.Render()\ninteractor.Start()\n</code></pre>\n<p>Thanks for the help!</p>\n"
  ],
  "Using BeautifulSoup in a BeeWare app gives `ModuleNotFoundError: No module named &#39;bs4&#39;": [
    "https://stackoverflow.com/questions/75915537/using-beautifulsoup-in-a-beeware-app-gives-modulenotfounderror-no-module-named",
    "<p>I am trying to import <code>beautifulsoup4</code>in a BeeWare app (with its own virtual environment) using the command:</p>\n<pre><code>from bs4 import BeautifulSoup\n</code></pre>\n<p>But I get a <code>ModuleNotFoundError: No module named 'bs4'</code> even though I have installed <code>beautifulsoup4</code> in my virtual environment and added it to the dependencies in my <code>pyproject.toml</code> file. What's the issue then? Solutions I have found for regular virtual environments do not seem to apply to BeeWare apps. The issue only arises when I run the <code>briefcase run</code> command, but not with <code>briefcase dev</code>.</p>\n"
  ],
  "Python: pywhatkit.core.exceptions.UnableToAccessApi when using PyWhatKit for converting text to handwriting": [
    "https://stackoverflow.com/questions/75107960/python-pywhatkit-core-exceptions-unabletoaccessapi-when-using-pywhatkit-for-con",
    "<p>Our teacher showed us some code on how to convert text to handwriting.\nThe code is as follows:</p>\n<pre class=\"lang-py prettyprint-override\"><code>import pywhatkit as kt\n\ntext = &quot;Hello SoftUni!!&quot;\nkt.text_to_handwriting(text, rgb=(196, 213, 0))\n</code></pre>\n<p>But when I run it in PyCharm I got the following error:</p>\n<pre><code>File &quot;C:\\Programming\\Python\\Projects\\FirstStepsLab\\TextToHandwriting.py&quot;, line 4, in &lt;module&gt;\n    kt.text_to_handwriting(text, rgb=(196, 213, 0))\n  File &quot;C:\\Programming\\Python\\Projects\\ProgramFlow\\venv\\Lib\\site-packages\\pywhatkit\\handwriting.py&quot;, line 22, in text_to_handwriting\n    raise exceptions.UnableToAccessApi(&quot;Unable to access Pywhatkit api right now&quot;)\npywhatkit.core.exceptions.UnableToAccessApi: Unable to access Pywhatkit api right now\n</code></pre>\n<p>Can you help put why I got this error and how to fix the code?</p>\n<p>I tried searching on Google but only found much more difficult solutions including the cv2 library.</p>\n"
  ],
  "QTableView Highlight not working in child window": [
    "https://stackoverflow.com/questions/75949917/qtableview-highlight-not-working-in-child-window",
    "<p>I've got a QMainWindow which is calling a child window (QDialog) with a QTableView in it. The Problem is that if I select an item in the QTableView it is not highlighted. If I do not set the dialog to be a child of mainwindow it is working. Is the palette somehow iherited from the mainwindow? The child dialog is loaded from an .ui file.</p>\n<p>I've printed the color of the palette and it is the correct color:</p>\n<pre><code>        palette = self.tblView.palette()\n        print(palette.highlight().color().name())\n</code></pre>\n<p>Any suggestions?</p>\n<p>Regards, David</p>\n"
  ],
  "what is difference between make constructor and assignment a variable after creating an instance?": [
    "https://stackoverflow.com/questions/75949545/what-is-difference-between-make-constructor-and-assignment-a-variable-after-crea",
    "<p>I am struggling to get a point difference between</p>\n<pre><code>class Item:\n  def __init__(self, name):\n    self.name = name\n\nitem = Item(&quot;Phone&quot;)\n</code></pre>\n<p>and assign variable like this</p>\n<pre><code>class Item:\n   def __str__(self):\n     return self.name\n\nitem = Item()\nitem.name = &quot;Phone&quot;\n</code></pre>\n<p>i have spent more than 2 hours in order to understand, but i could not find an answer for my question</p>\n"
  ],
  "Modbus-TK: Errors when Master reads my server": [
    "https://stackoverflow.com/questions/75949900/modbus-tk-errors-when-master-reads-my-server",
    "<p>I add a slave to transfer Data to a Master (separate Device).\nThe problems start, when I connect the device. I get the errors:</p>\n<pre><code>invalid request: Invalid CRC in request\ninvalid request: Request length is invalid 2\ninvalid request: Request length is invalid 1\n\n</code></pre>\n<p>This is my code stripped down to the basic functions to set up a slave:</p>\n<pre><code>import modbus_tk.defines as cst\nfrom modbus_tk import modbus_rtu\nimport serial\n\nserver1 = modbus_rtu.RtuServer(serial.Serial('/dev/ttyUSB1', 9600, 8, &quot;N&quot;, 1))\n\n# server1.interframe_multiplier = 20\n# server1.interchar_multiplier = 5\nserver1.set_timeout = 0.5 \nslave1 = server1.add_slave(1)\n# Add some registers\nnumber_of_reg = 3200\nslave1.add_block('0', cst.HOLDING_REGISTERS, 0, number_of_reg) #(Slave_id, cst..., start-adress, number of registers)\n\n# fill all registers\nfor i in range(number_of_reg):\n     slave1.set_values('0', i, 0)\n\nserver1.start()\n</code></pre>\n<p>I changed timeout and even interframe and interchar</p>\n<pre><code># server1.interframe_multiplier = 20\n# server1.interchar_multiplier = 5\nserver1.set_timeout = 0.5 \n</code></pre>\n"
  ],
  "Simplified linear constraint of piecewise transformer": [
    "https://stackoverflow.com/questions/75949896/simplified-linear-constraint-of-piecewise-transformer",
    "<p>I try to implement a piecewise linear transformer via simplified linear constraints (without binaries for each segment) using pyomo.Piecewise() in Pyomo.\nThe transformer has a concave performance function P_out(P_in) with a negative y intercept. Compare the below figure. Further the transformer has an operation range of 20% to 100% of nominal power.</p>\n<p><a href=\"https://i.stack.imgur.com/KutmH.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/KutmH.png\" alt=\"enter image description here\" /></a></p>\n<p>I now face the problem that with the negative y intercept of the transformer it get caught at the x (P_in) value where y (P_out) gets zero, in case it should not be operated. But instead I want that in case it is shut off P_in and P_out should be zero, which is indeed to a point on the performance function.</p>\n<p>Do you have any idea how to implement this without the creation of quadratic terms.\nBelow a simplified code descibing the problem.</p>\n<pre><code>#%%\nimport pyomo.environ as pyo\nimport pandas as pd\n\n#%% Generate some data for PV and Load\ndata_pv = [0,0,0,10,20,50,60,100]\ndata_pv_dict = (dict(enumerate(data_pv,1)))\n\ndata_load = [20,20,20,20,20,20,20,20]\ndata_load_dict = (dict(enumerate(data_load,1)))\n\n#%% Pyomo model\n# Define model\nmodel = pyo.ConcreteModel()\n# define timeperiod set\nmodel.T = pyo.RangeSet(len(data_pv_dict))\n\n#%% PV-Load-Grid\n# Define model parameters\nmodel.pv_power = pyo.Param(model.T, initialize=data_pv_dict)\nmodel.load_power = pyo.Param(model.T, initialize=data_load_dict)\nmodel.grid_cost_buy = pyo.Param(initialize=0.40)\nmodel.grid_cost_sell = pyo.Param(initialize=0.10)\n# Variables\nmodel.grid_power_import = pyo.Var(model.T, domain=pyo.NonNegativeReals)\nmodel.grid_power_export = pyo.Var(model.T, domain=pyo.NonNegativeReals)\n     \n#%% Piecewise Transformer\n# Define parameters\nmodel.trans_power_nominal = pyo.Param(initialize=100)\nmodel.trans_power_min = pyo.Param(initialize=0.1)\nmodel.trans_cost_in = pyo.Param(initialize=0.15)\n# Define variables\nmodel.trans_on_off = pyo.Var(model.T, domain=pyo.Binary) # On/off status of component: 0=off and 1=on\nmodel.trans_power_in = pyo.Var(model.T, domain=pyo.NonNegativeReals)\nmodel.trans_power_out = pyo.Var(model.T, domain=pyo.NonNegativeReals)    \nmodel.trans_power_in_norm = pyo.Var(model.T, domain=pyo.NonNegativeReals, bounds=(0,1))\nmodel.trans_power_out_norm = pyo.Var(model.T, domain=pyo.NonNegativeReals)\n\n# Performance function of transformer for piecewise\ndef f(model,t,x):\n    y = (-0.1965*x**2 + 0.6275*x -0.01)\n    return(y) \n# Define breakpoints and values of PWA function\nbreakpoints = [0.0, 0.25, 0.5, 0.75, 1.0]\n# Create breakpoints dict with same index as variables\nPW_PTS = {}\nfor idx in model.trans_power_in_norm.index_set():\n    PW_PTS[idx] = breakpoints\n    \n# Define the PWA function\nmodel.trans_PWA_func = pyo.Piecewise(model.T, \n                                     model.trans_power_out_norm, \n                                     model.trans_power_in_norm, \n                                     pw_pts=PW_PTS, \n                                     f_rule=f, \n                                     pw_constr_type='UB', \n                                     pw_repn='CC',\n                                     force_pw=False)\n\n# Definition of absolute power from normalized power values\ndef power_in_norm_rule(m, t):\n    return (m.trans_power_in[t] ==  m.trans_power_in_norm[t] * m.trans_power_nominal)\nmodel.trans_power_in_norm_c = pyo.Constraint(model.T, rule=power_in_norm_rule)\n\ndef power_out_norm_rule(m, t):\n    return (m.trans_power_out[t] == m.trans_power_out_norm[t] * m.trans_power_nominal)\nmodel.trans_power_out_norm_c = pyo.Constraint(model.T, rule=power_out_norm_rule)          \n\n# Max output power according to nominal power\ndef max_power_out_rule(m, t):\n    return (m.trans_power_out[t] &lt;= m.trans_on_off[t] * m.trans_power_nominal)\nmodel.trans_max_power_in_c = pyo.Constraint(model.T, rule=max_power_out_rule)\n\n# Min electric power to start component\ndef min_power_out_rule(m, t):\n    return (m.trans_power_out[t] &gt;= m.trans_on_off[t] * m.trans_power_min)\nmodel.trans_min_power_in_c = pyo.Constraint(model.T, rule=min_power_out_rule)\n\n#%%# Balanced electricity bus rule\ndef balanced_bus_rule(m, t):\n    return (0 == (m.pv_power[t] \n                  - m.load_power[t] \n                 + m.trans_power_out[t]\n                 + m.grid_power_import[t] \n                 - m.grid_power_export[t]))\nmodel.bus_c = pyo.Constraint(model.T, rule=balanced_bus_rule)\n\n#%% Objective function\n# define the cost function\ndef obj_rule(m):\n    return sum(m.grid_power_import[t]*m.grid_cost_buy \n               - m.grid_power_export[t]*m.grid_cost_sell \n               + m.trans_power_in[t]*m.trans_cost_in  for t in m.T)\nmodel.obj = pyo.Objective(rule=obj_rule, sense=1)\n\n#%% Print all model equations\nwith open('model.txt','w') as output_file:\n    model.pprint(output_file)\n\n#%% Solve model\n# solve the problem\nsolver = pyo.SolverFactory('gurobi')\nresults = solver.solve(model, report_timing=True, tee=True)\n# Print basic problem/solver info\nresults.write()\n\n#%% Access of results                           \nresults_df = pd.DataFrame({'load_power':data_load_dict.values(),\n                           'pv_power':data_pv_dict.values(),\n                           'trans_on_off': list(model.trans_on_off.extract_values().values()),\n                           'trans_power_in_norm':list(model.trans_power_in_norm.extract_values().values()),\n                           'trans_power_out_norm':list(model.trans_power_out_norm.extract_values().values()),\n                           'trans_power_in':list(model.trans_power_in.extract_values().values()),\n                           'trans_power_out':list(model.trans_power_out.extract_values().values()),\n                           'grid_power_import':list(model.grid_power_import.extract_values().values()),\n                           'grid_power_export':list(model.grid_power_export.extract_values().values())})\n\n# Printing of objective function\nprint('Total costs:',pyo.value(model.obj))\n</code></pre>\n<p>Thanks a lot!\nFabi</p>\n"
  ],
  "Find points outside of given interval": [
    "https://stackoverflow.com/questions/75949889/find-points-outside-of-given-interval",
    "<p>I'm using <code>mark_area</code> of <code>altair</code> and I want to find the point(s) that lie outside the given interval, defined by <code>yhat_lower</code> and <code>yhat_upper</code>.</p>\n<p>I wasn't able to detect that point from the dataframe, so I was wondering if it'd be possible to do it with the marked area. In the example below, we want to get the 4th point (lying outside of the green interval):</p>\n<pre><code>import altair as alt\nimport pandas as pd\n\ndf = pd.DataFrame(columns = ['ds', 'trend', 'yhat', 'yhat_lower', 'yhat_upper', 'fact'])\ndf['ds'] = [datetime(2018, 1, 1), datetime(2019, 1, 1), datetime(2020, 1, 1), datetime(2021, 1, 1), datetime(2022, 1, 1)]\ndf['trend'] = [-0.068248, -0.090953, -0.113658, -0.136425, -0.159130]\ndf['yhat'] = [-0.082093, -0.073962, -0.048521, -0.217661, -0.191411]\ndf['yhat_lower'] = [-0.14437823, -0.13619651, -0.11227963, -0.27627893, -0.2571091]\ndf['yhat_upper'] = [-0.02008602, -0.01018924,  0.01822577, -0.14938101, -0.12718444]\ndf['fact'] = [-0.05873101, -0.09336675, -0.06372543, -0.25477722, -0.15421756]\ndisplay(df)\n\ninterval = alt.Chart(df).mark_area(interpolate=&quot;basis&quot;, color = '#7FC97F').encode(\n    x=alt.X('ds:T',  title ='date'),\n    y='yhat_upper',\n    y2='yhat_lower',\n    tooltip=['ds', 'fact', 'yhat_lower', 'yhat_upper']\n).interactive().properties(\n    title='Anomaly Detection'\n)\n\nfact = alt.Chart(df).mark_circle(size=15, opacity=0.7, color = 'Black').encode(\n    x='ds:T',\n    y=alt.Y('fact', title='Sales'),    \n    tooltip=['ds', 'fact', 'yhat_lower', 'yhat_upper']\n).interactive() \n\nalt.layer(interval, fact).properties(width=870, height=450).configure_title(fontSize=20)\n</code></pre>\n<p>Output:</p>\n<p><a href=\"https://i.stack.imgur.com/BHhMt.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/BHhMt.png\" alt=\"enter image description here\" /></a></p>\n"
  ]
}